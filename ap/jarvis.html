<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="https://<%=domain%>/chat/manifest.json?userId=<%=bot%>&name=<%=title%>&icon=<%=icon%>">


    <!-- Latest compiled and minified CSS -->
    <title><%= title %></title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        .bot-container{
            height: 100vh;
        }
        @media screen and (max-device-width: 640px) {
            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
            }

            .bot-container{
                height: calc(100%);
                height: -webkit-calc(100%);
                height: -moz-calc(100%);
                margin-top: 0;
                position: relative;
            }
        }
    </style>
</head>
<body>

<div id="bot-container" class="bot-container">
    <div style="height: 100%; margin:auto" id="adsByBotplatform-<%= bot %>"></div>
    <script src="https://<%=domain%>/chat/plugin-ad-v1.js?name=<%= name %>&bot=<%= bot %>&input=true&showTitle=true&skin=mobile&botPayload=<%= botPayload %>&trigger=<%= trigger %>&uid=<%= uid %>&signature=<%=signature%>&init_message=<%=init_message%>" async defer> </script>
</div>
<script type="text/javascript">
    if (window.navigator.userAgent.toLowerCase().indexOf('iphone') !== -1) {
        document.getElementById ("bot-container").style.height = "calc(100% - 25px)"
    }
    if ('serviceWorker' in window.navigator) {
        window.navigator.serviceWorker.register('https://<%=domain%>/chat/service-worker',
            {
                'scope': '/chat/mobile/<%=bot%>'
            })
            .then(function(reg){
                console.log("Service worker registered.", reg);
            }).catch(function(err) {
            console.log("No it didn't. This happened:", err)
        });
    }
</script>

</body>
</html>
